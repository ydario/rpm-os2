<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>rpm: rpmfileutil.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2-20100208 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>rpmfileutil.h</h1><a href="rpmfileutil_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _RPMFILEUTIL_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _RPMFILEUTIL_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;rpm/rpmutil.h&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;rpm/rpmio.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;rpm/rpmpgp.h&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;rpm/argv.h&gt;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00016"></a>00016 <span class="preprocessor">#endif</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00020"></a><a class="code" href="group__rpmfileutil.html#ga8cd18c5a4325494025f60227fcd9b561">00020</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="group__rpmfileutil.html#ga8cd18c5a4325494025f60227fcd9b561">rpmCompressedMagic_e</a> {
<a name="l00021"></a><a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a8a4363137c96594e751ff917000766a7">00021</a>     <a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a8a4363137c96594e751ff917000766a7">COMPRESSED_NOT</a>              = 0,    
<a name="l00022"></a><a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a0036b875046b4bad28d4285c98ca33c4">00022</a>     <a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a0036b875046b4bad28d4285c98ca33c4">COMPRESSED_OTHER</a>            = 1,    
<a name="l00023"></a><a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561ae6f801c28caec783071ce7af92d56eec">00023</a>     <a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561ae6f801c28caec783071ce7af92d56eec">COMPRESSED_BZIP2</a>            = 2,    
<a name="l00024"></a><a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a0d06d7254f4eed0c6739ca57ff578c7c">00024</a>     <a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a0d06d7254f4eed0c6739ca57ff578c7c">COMPRESSED_ZIP</a>              = 3,    
<a name="l00025"></a><a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561ab849fbc1e73f3871280ece58c89d38ee">00025</a>     <a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561ab849fbc1e73f3871280ece58c89d38ee">COMPRESSED_LZMA</a>             = 4,    
<a name="l00026"></a><a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a7847689aa59cbc03ae0201f4b180fd20">00026</a>     <a class="code" href="group__rpmfileutil.html#gga8cd18c5a4325494025f60227fcd9b561a7847689aa59cbc03ae0201f4b180fd20">COMPRESSED_XZ</a>               = 5     
<a name="l00027"></a>00027 } <a class="code" href="group__rpmfileutil.html#gaeb95839b1705caf41cb0593d533b89c3">rpmCompressedMagic</a>;
<a name="l00028"></a>00028 
<a name="l00038"></a>00038 <span class="keywordtype">int</span> <a class="code" href="group__rpmfileutil.html#ga47701f797283f30da56be8d01d5cd1da" title="Calculate a file digest and size.">rpmDoDigest</a>(<a class="code" href="group__rpmpgp.html#ga7dfcf98c6e163d995601e76dc0797ca1" title="9.4.">pgpHashAlgo</a> algo, <span class="keyword">const</span> <span class="keywordtype">char</span> * fn,<span class="keywordtype">int</span> asAscii,
<a name="l00039"></a>00039                   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * digest, <a class="code" href="group__rpmtypes.html#gab9fe53f396a324ab4d4e07cad793f730">rpm_loff_t</a> * fsizep);
<a name="l00040"></a>00040 
<a name="l00046"></a>00046 <a class="code" href="group__rpmtypes.html#ga078f4187c683508f3147e94397bab8d5" title="RPM IO file descriptor type.">FD_t</a> <a class="code" href="group__rpmfileutil.html#gac4a257784b294f11f6dbdbd6368d687c" title="Thin wrapper for mkstemp(3).">rpmMkTemp</a>(<span class="keywordtype">char</span> *templ);
<a name="l00047"></a>00047 
<a name="l00058"></a>00058 <a class="code" href="group__rpmtypes.html#ga078f4187c683508f3147e94397bab8d5" title="RPM IO file descriptor type.">FD_t</a> <a class="code" href="group__rpmfileutil.html#ga2d985c9d6147d42f0f97ef439f54c691" title="Return file handle for a temporaray file.">rpmMkTempFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * prefix, <span class="keywordtype">char</span> **fn);
<a name="l00059"></a>00059 
<a name="l00068"></a>00068 <span class="keywordtype">int</span> <a class="code" href="group__rpmfileutil.html#ga38d473d1bb6c55091c55620dc035ab3b" title="Insure that directories in path exist, creating as needed.">rpmioMkpath</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * path, mode_t mode, uid_t uid, gid_t gid);
<a name="l00069"></a>00069 
<a name="l00078"></a>00078 <span class="keywordtype">int</span> <a class="code" href="group__rpmfileutil.html#gae3a5064720ea1f5929f4f1b059d8a80c" title="Create several directories (including parents if needed) in one go.">rpmMkdirs</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *root, <span class="keyword">const</span> <span class="keywordtype">char</span> *pathstr);
<a name="l00079"></a>00079 
<a name="l00085"></a>00085 <span class="keywordtype">char</span> * <a class="code" href="group__rpmfileutil.html#ga23bc9da080ad3340bbba93a0bf45dd07" title="Canonicalize file path.">rpmCleanPath</a>     (<span class="keywordtype">char</span> * path);
<a name="l00086"></a>00086 
<a name="l00097"></a>00097 <span class="keywordtype">char</span> * <a class="code" href="group__rpmfileutil.html#gaa32585dcb214b5099ad0ea3d4044221b" title="Merge 3 args into path, any or all of which may be a url.">rpmGenPath</a>       (<span class="keyword">const</span> <span class="keywordtype">char</span> * urlroot,
<a name="l00098"></a>00098                         <span class="keyword">const</span> <span class="keywordtype">char</span> * urlmdir,
<a name="l00099"></a>00099                         <span class="keyword">const</span> <span class="keywordtype">char</span> * urlfile);
<a name="l00100"></a>00100 
<a name="l00106"></a>00106 <span class="keywordtype">char</span> * <a class="code" href="group__rpmfileutil.html#ga723114c0afb4b3df3127d7b6a29d54cf" title="Return (malloc&amp;#39;ed) expanded, canonicalized, file path.">rpmGetPath</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> * path, ...) <a class="code" href="rpmutil_8h.html#ab20b5f4a77194dc7171b2311853db5cd">RPM_GNUC_NULL_TERMINATED</a>;
<a name="l00107"></a>00107 
<a name="l00115"></a>00115 <span class="keywordtype">int</span> <a class="code" href="group__rpmfileutil.html#ga7bec06f6c7624e6f1968137466e56914" title="Return URL path(s) from a (URL prefixed) pattern glob.">rpmGlob</a>(const <span class="keywordtype">char</span> * patterns, <span class="keywordtype">int</span> * argcPtr, <a class="code" href="argv_8h.html#a4628d0ccf538438d6ef2795aeebd7e31">ARGV_t</a> * argvPtr);
<a name="l00116"></a>00116 
<a name="l00122"></a>00122 <span class="keywordtype">char</span> * <a class="code" href="group__rpmfileutil.html#ga03dd0d02944697af9acf220a897941cd" title="Escape isspace(3) characters in string.">rpmEscapeSpaces</a>(const <span class="keywordtype">char</span> * s);
<a name="l00123"></a>00123 
<a name="l00130"></a>00130 <span class="keywordtype">int</span> <a class="code" href="group__rpmfileutil.html#ga33cf90d9756fd962225659063db265ed" title="Return type of compression used in file.">rpmFileIsCompressed</a> (const <span class="keywordtype">char</span> * file, <a class="code" href="group__rpmfileutil.html#gaeb95839b1705caf41cb0593d533b89c3">rpmCompressedMagic</a> * compressed);
<a name="l00131"></a>00131 
<a name="l00138"></a>00138 <span class="keywordtype">int</span> <a class="code" href="group__rpmfileutil.html#gae63f2f807558d45d7c07d3e0bfe2bff1" title="Check if path (string) ends with given suffix.">rpmFileHasSuffix</a>(const <span class="keywordtype">char</span> *path, const <span class="keywordtype">char</span> *suffix);
<a name="l00139"></a>00139 
<a name="l00144"></a>00144 <span class="keywordtype">char</span> * <a class="code" href="group__rpmfileutil.html#gac50a8e532768e8bbad7c5f3d25fbecbd" title="Like getcwd() but the result is malloced.">rpmGetCwd</a>(<span class="keywordtype">void</span>);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>}
<a name="l00148"></a>00148 <span class="preprocessor">#endif</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* _RPMFILEUTIL_H */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2-20100208 </small></address>
</body>
</html>
